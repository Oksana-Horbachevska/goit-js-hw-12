{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// ===============функція js-fetch запиту =================\n\n// export function getImagesByQuery(query) {\n//   const BASE_URL = 'https://pixabay.com/';\n//   const END_POINTS = 'api/';\n//   const params = new URLSearchParams({\n//     key: '50383604-c913cf66ede56daf64b093a7e',\n//     q: query,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: 'true',\n//   });\n\n//   const url = `${BASE_URL}${END_POINTS}?${params}`;\n\n//   return fetch(url).then(res => {\n//     if (res.ok) {\n//       return res.json();\n//     } else {\n//       throw new Error('Something vent wrong...Please try again');\n//     }\n//   });\n// }\n\n// ===============функція js-axios запиту =================\nexport const PAGE_SIZE = 15;\n\nexport async function getImagesByQuery(query, page) {\n  const BASE_URL = 'https://pixabay.com/';\n  const END_POINTS = 'api/';\n  const url = BASE_URL + END_POINTS;\n\n  const params = new URLSearchParams({\n    key: '50383604-c913cf66ede56daf64b093a7e',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: PAGE_SIZE,\n  });\n\n  const res = await axios.get(url, { params });\n\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst galleryElem = document.querySelector('.gallery');\nconst loaderElem = document.querySelector('.loader-wrapper');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n// ==================== розміткa ====================\n\nfunction imageTemplate(obj) {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${obj.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${obj.webformatURL}\"\n      alt=\"${obj.tags}\"\n    />\n  </a>\n   <div class=\"info\">\n          <p><b>Likes:</b> ${obj.likes}</p>\n          <p><b>Views:</b> ${obj.views}</p>\n          <p><b>Comments:</b> ${obj.comments}</p>\n          <p><b>Downloads:</b> ${obj.downloads}</p>\n        </div>\n</li>\n`;\n}\n\nexport function createGallery(images) {\n  const markup = images.map(imageTemplate).join('\\n');\n  galleryElem.innerHTML = markup;\n  lightbox.refresh();\n}\n\nexport function LoadMoreGallery(images) {\n  const markup = images.map(imageTemplate).join('\\n');\n  galleryElem.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n\n  // Плавне прокручування\n  const { height: cardHeight } = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// ================= очищає вміст контейнера ====================\n\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\n// =================прибирає клас до Loader ====================\n\nexport function showLoader() {\n  loaderElem.classList.remove('hidden');\n}\n\n// =================  додає клас до Loader ====================\n\nexport function hideLoader() {\n  loaderElem.classList.add('hidden');\n}\n\n// ================= прибирає клас до Load more ====================\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\n// ================= додає клас до Load more ====================\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery, PAGE_SIZE } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  LoadMoreGallery,\n} from './js/render-functions';\n\nconst refs = {\n  formElem: document.querySelector('.form'),\n  galleryElem: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlet userValue;\nlet currentPage = 0;\nlet maxPage = 0;\n\n// =============== основний код =================\n\nrefs.formElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoadMoreButton();\n  showLoader();\n\n  userValue = e.target.elements['search-text'].value.trim();\n  currentPage = 1;\n\n  if (userValue !== '') {\n    clearGallery();\n    const data = await getImagesByQuery(userValue, currentPage);\n    if (data.hits.length > 0) {\n      createGallery(data.hits);\n      hideLoader();\n\n      maxPage = Math.ceil(data.totalHits / PAGE_SIZE);\n      updateBtnStatus();\n      arcticleNotification();\n    } else {\n      hideLoader();\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        maxWidth: '432px',\n        messageColor: '#ffffff',\n        close: true,\n        closeOnClick: true,\n        icon: 'icon-error',\n      });\n\n      refs.galleryElem.innerHTML = '';\n    }\n  }\n\n  e.target.reset();\n});\n\n// ============== регулює Load more ================\n\nfunction updateBtnStatus() {\n  if (currentPage < maxPage) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\nfunction arcticleNotification() {\n  if (currentPage === maxPage) {\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomRight',\n      backgroundColor: '#ef4040',\n      maxWidth: '432px',\n      messageColor: '#ffffff',\n    });\n  }\n}\n// ==================== Пагінація ===================\n\nrefs.loadMoreBtn.addEventListener('click', async e => {\n  showLoader();\n\n  currentPage += 1;\n\n  updateBtnStatus();\n  arcticleNotification();\n  const data = await getImagesByQuery(userValue, currentPage);\n  if (data.hits.length > 0) {\n    LoadMoreGallery(data.hits);\n    hideLoader();\n  }\n});\n"],"names":["PAGE_SIZE","getImagesByQuery","query","page","url","params","axios","lightbox","SimpleLightbox","galleryElem","loaderElem","loadMoreBtn","imageTemplate","obj","createGallery","images","markup","LoadMoreGallery","cardHeight","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","refs","userValue","currentPage","maxPage","data","updateBtnStatus","arcticleNotification","iziToast"],"mappings":"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"}